
<h2><a name='documentation'></a>Documentation</h2>

<h3><a name='graphiteclass'></a>Graphite Class</h3>
<div class='class'>
<p>This object represents a set of zero or more bits of RDF data and gives you some functions to start poking them.</p>
<dl class="function_list">

<dt>$graph = new Graphite();</dt>
<dt>$graph = new Graphite( $namespace_map );</dt>
<dd>Create a new instance of Graphite. See the <a href='#namespaces'>Namespaces</a> example above for how to specify a namespace map and a list of pre-declared namespaces. </dd>

<dt>$graph-&gt;ns( $alias, $namespace );</dt>
<dd>Add an additional namespace alias to the Graphite instance.</dd>

<dt>$count = $graph-&gt;load( $uri_to_load );</dt>
<dd>Load the RDF from the given URI or URL. Return the number of triples loaded.</dd>

<dt>$count = $graph-&gt;addTurtle( $base, $data );</dt>
<dd>Take a base URI and a string of turtle RDF and load the new triples into the graph. Return the number of triples loaded.</dd>

<dt>$count = $graph-&gt;addRDFXML( $base, $data );</dt>
<dd>As for addTurtle but load a string of RDF XML.</dd>

<dt>$resource = $graph-&gt;resource( $uri );</dt>
<dd>Get the resource with given URI. $uri may be abbreviated to "namespace:value".</dd>

<dt>$graph-&gt;cacheDir( $dir, [$age] );</dt>
<dd>$dir should be a directory the webserver has permission to read and write to. Any RDF/XML documents which graphite downloads will be saved here. If a cache exists and is newer than $age seconds then load() will use the document in the cache directory in preference to doing an HTTP request. $age defaults to 24*60*60 - 24 hours. This including this function can seriously improve graphite performance! If you want to always load certain documents, load them before setting the cache.</dd>

<dt>print $graph-&gt;dump( [$options] );</dt>
<dd>Returns the entire RDF in memory in nicely formatted HTML so you can see what's going on. Options is an optional array, same parameters as $options on a dump() of an individual resource.</dd>

<dt>$resource = $graph-&gt;primaryTopic();</dt>
<dd>Utility method (shamelessly ripped off from EasyRDF). Returns the primary topic of the first URL that was loaded. Handy when working with FOAF.</dd>

<dt>$resources = $graph-&gt;allOfType( $type_uri );</dt>
<dd>Return a list of all resources loaded, with the rdf:type given. eg. $graph-&gt;allOfType( "foaf:Person" )</dd>

<dt>$resources = $graph-&gt;allSubjects();</dt>
<dd>Return a list of all resources in the graph which are the subject of at least one triple.</dd>

<dt>$resources = $graph-&gt;allObjects();</dt>
<dd>Return a list of all resources in the graph which are the object of at least one triple.</dd>

</dl>
</dl>
</div>

<h3><a name='resourceclass'></a>Resource Class</h3>
<div class='class'>
<p>This represents a single RDF thing, with a URI, or a literal value. If you treat it as a string it will return the URI or the literal, but there's some useful functions you can call on it, too.</p>
<dl class="function_list">
<dt>$new_resource = $resource-&gt;get( $property );</dt>
<dt>$new_resource = $resource-&gt;get( <a href='#resources'>*resource list*</a> );</dt>
<dd>Get a single resource, related to the current resource by the given property. The property may be a URI or "namespace:value". It may be a literal or a normal resource. If there's no value, it returns a null resource object (not a null value), so your code will muddle through. If you specify multiple properties, then this returns the first resource it finds. To get a value from the inverse of a relationship, prefix the property string with "-". For example, to get the mayor of a city you may need to do $city-&gt;get( "-somens:isMayorOf" );</dd>

<dt>$string = $resource-&gt;getString( $property );</dt>
<dt>$string = $resource-&gt;getString( <a href='#resources'>*resource list*</a> );</dt>
<dd>As for get() but return the result's string value.</dd>

<dt>$boolean = $resource-&gt;has( $property );</dt>
<dt>$boolean = $resource-&gt;has( <a href='#resources'>*resource list*</a> );</dt>
<dd>Returns true if there this resource has at least one relationship with the given properties (or with any of the given properties)</dd>

<dt>$resource_list = $resource-&gt;all( $property );</dt>
<dt>$resource_list = $resource-&gt;all( <a href='#resources'>*resource list*</a> );</dt>
<dd>As for get(), but returns a resource list of zero or more matching resources. Resource lists may be treated as arrays, but see below for additional properties.</dd>

<dt>$resource_list = $resource-&gt;allString( $property );</dt>
<dt>$resource_list = $resource-&gt;allString( <a href='#resources'>*resource list*</a> );</dt>
<dd>As for all(), but returns a resource list the string values of each result.</dd>

<dt>$relation_list = $resource-&gt;relations();</dt>
<dd>Returns an resource list of the properties relating to this resource, including inverse ones.</dd>

<dt>$count = $resource-&gt;load();</dt>
<dd>Try and resolve this resource via the web and load the RDF found there into the current Graphite object. Returns the number of triples loaded (zero probably indicates failure).</dd>

<dt>$count = $resource-&gt;loadSameAs( [$prefix] );</dt>
<dd>Iterate over any owl:sameAs properties this resource has and load them from the web. Any loaded triples with the URI of the resource being loaded will be created with both that URI and the URI of the current resource, causing the linked data to be immediately available via the current resource. A single Graphite instance won't load the same URI more than once, so you can call this function twice to follow first, then second generation sameAs relations, if you want. The 2nd call will return the number of triples it loaded the first time, so don't try looping until it returns zero, rather loop until the number of triples returned does not increase. If $prefix is set then only follow sameAs links to URIs with that prefix.</dd>

<dt>$resource = $resource-&gt;type()</dt>
<dt>$resources_list = $resource-&gt;types()</dt>
<dd>Handy methods for getting the rdf:type or types of the resource. Use for code readability.</dd>

<dt>$boolean = $resource-&gt;isType( $type );</dt>
<dt>$boolean = $resource-&gt;isType( <a href='#resources'>*resource list*</a> );</dt>
<dd>Return true if the resource is of the given type, or any of the given list of types.</dd>

<dt>$label = $resource-&gt;label()</dt>
<dd>Get a valid label for this resource, tries all of skos:prefLabel, rdfs:label, foaf:name, dct:title, dc:title, sioc:name.</dd>

<dt>$htmllink = $resource-&gt;link()</dt>
<dd>Returns &lt;a href='THIS'&gt;THIS&lt;/a&gt; -  saves time when wanting to link homepages, etc.</dd>

<dt>$dump = $resource-&gt;dump( [$options] );<dt>
<dd>Create a pretty HTML dump of the current resource. Handy for debugging halfway through hacking something. $options is an optional array of flags to modify how dump() renders HTML. 
<div><strong>"label"=&gt;1</strong> - add a label for the URI, and the rdf:type, to the top of each resource box, if the information is in the current graph.</div>
<div><strong>"labeluris"=&gt;1</strong> - when listing the resources to which this URI relates, show them as a label, if possible, rather than a URI. Hovering the mouse will still show the URI.</div>
<div><strong>"internallinks"=&gt;1</strong> - instead of linking directly to the URI, link to that resource's dump on the current page (which may or may not be present). This can, for example, make bnode nests easier to figure out.</div>
</dd>
</dl>

<hr />
<h4>Experimental Resource Class methods</h4>
<p>These do some funky stuff relating to our research at Southampton. They may be modified or removed in later versions of Graphite.</p>
<dl class="function_list">
<dt>$count = $resource-&gt;loadSameAsOrg( $prefix );</dt>
<dd>Look up this URI in <a href="http://sameas.org/">http://sameas.org</a> and follow any sameAs URIs from there which match the prefix. $prefix is enforced as sameAs.org may return hundreds of URIs.</dd>

<dt>$count = $resource-&gt;loadDataGovUKBackLinks()</dt>
<dd>Takes the current resource and attempts to find backlinks via <a href='http://backlinks.psi.enakting.org/'>The EnAKTing project</a>. This works rather nicely with dbpedia URIs of British regions, cities etc.</dd>


</dl>
</div>

<h3><a name='resourcelistclass'></a>ResourceList Class</h3>
<div class='class'>
<p>This represents a list of RDF things, URIs or literal values. You can just treat it like an array, or you can call methods on it.</p>

<dl class="function_list">

<dt>$new_resourcelist = $resourcelist-&gt;get( $property );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;get( <a href='#resources'>*resource list*</a> );</dt>
<dd>Call $resource-&gt;get(...) on every item in this list and return a resourcelist of the results.</dd>

<dt>$string = $resource-&gt;getString( $property );</dt>
<dt>$string = $resource-&gt;getString( <a href='#resources'>*resource list*</a> );</dt>
<dd>Call $resource-&gt;getString(...) on every item in this list and return a resourcelist of the results.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;all( $property );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;all( <a href='#resources'>*resource list*</a> );</dt>
<dd>Call $resource-&gt;all(...) on every item in this list and return a resourcelist of all the results. Duplicate resources are eliminated.</dd>

<dt>$resource_list = $resource-&gt;allString( $property );</dt>
<dt>$resource_list = $resource-&gt;allString( <a href='#resources'>*resource list*</a> );</dt>
<dd>Call $resource-&gt;allString(...) on every item in this list and return a resourcelist of all the results. As with all(), duplicate resources and eliminated.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;label();</dt>
<dd>Call $resource-&gt;label() on every item in this list and return a resourcelist of the results.</dd>

<dt>$n = $resourcelist-&gt;load();</dt>
<dd>Call $resource-&gt;load() on every item in this list and return the total triples from these resources. Careful, this could cause a large number of requests at one go!</dd>

<dt>$str = $resourcelist-&gt;join( $joinstr );</dt>
<dd>Returns a string of all the items in the resource list, joined with the given string.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;sort( $property );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;sort( <a href='#resources'>*resource list*</a> );</dt>
<dd>Return a copy of this resource list sorted by the given property or properties. If a resource has multiple values for a property then one will be used, as with $resource-&gt;get().</dd>

<dt>$new_resourcelist = $resourcelist-&gt;distinct();</dt>
<dd>Return a list with any duplicates removed, otherwise preserving current order.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;append( $resource );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;append( <a href='#resources'>*resource list*</a> );</dt>
<dd>Create a new resource list with the given resource or list of resources appended on the end of the current resource list.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;union( $resource );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;union( <a href='#resources'>*resource list*</a> );</dt>
<dd>Create a new resource list with the given resource or list of resources merged with the current list. Functionally the same as calling $resourcelist-&gt;append( ... )-&gt;distinct()</dd>

<dt>$new_resourcelist = $resourcelist-&gt;intersect( $resource );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;intersect( <a href='#resources'>*resource list*</a> );</dt>
<dd>Create a new resource list with containing only the resources which are in both lists. Only returns one instance of each resource no matter how many duplicates were in either list.</dd>

<dt>$new_resourcelist = $resourcelist-&gt;except( $resource );</dt>
<dt>$new_resourcelist = $resourcelist-&gt;except( <a href='#resources'>*resource list*</a> );</dt>
<dd>Create a new resource list with containing only the resources which are in $resourcelist but <i>not</i> in the list being passed in. Only returns one instance of each resource no matter how many duplicates were in either list.</dd>

<dt>$dump = $resourcelist-&gt;dump( [$options] );</dt>
<dd>Returns a string containing a dump of all the resources in the list. Options is an optional array, same parameters as $options on a dump() of an individual resource.</dd>
</dl>
</div>

<h3><a name='resources'></a>* Note about Graphite methods which can take a list of resources</h3>
<div class='class'>
<p>These methods work in a pretty cool way. To make life easier for you they can take a list of resources in any of the following ways.</p>
<p>$resource-&gt;get() is used as an example, it applies to many other methods.</p>

<dl class="function_list">
<dt>$resource-&gt;get( $uri_string )</dt>
<dd>Such as "http://xmlns.com/foaf/0.1/name".</dd>
<dt>$resource-&gt;get( $short_uri_string )</dt>
<dd>using any namespace defined with $graph-&gt;ns() or just built in. eg. "foaf:name".</dd>
<dt>$resource-&gt;get( $resource ) </dt>
<dd>An instance of Graphite_resource.</dd>
<dt>$resource-&gt;get( $thing, $thing, $thing, ... )</dt>
<dt>$resource-&gt;get( array( $thing, $thing, $thing, ... ) )</dt>
<dd>Where each thing is any of $uri_string, $short_uri_string or $resource.</dd>
<dt>$resource-&gt;get( $resourcelist ) </dt>
<dd>An instance of Graphite_resourceList.</dd>
</dl>
<p>This should make it quick and easy to write readable code!</p>
</div>

	</div>

